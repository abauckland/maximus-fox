$('table#<%=@old_specline_ref.to_s%>').remove();

var line_prefix = "<table id='<%=@updated_specline.id.to_s%>' width='100%'><tr class='new_specline_row'><td class='pad' width = '90'><%= escape_javascript(image_tag("move.png", :mouseover =>"move_rollover.png", :border=>0)) %></td>";
var line_suffix = "<td class='padding'></td><td class='specline_link'><%= escape_javascript(link_to image_tag("insrow.png", :mouseover =>"insrow-rollover.png", :border=>0), {:controller => "speclines", :action => "new_specline", :id => @updated_specline.id}, :class => "get")%><%= escape_javascript(link_to image_tag("edit.png", :mouseover =>"edit_rollover.png", :border=>0), {:controller => "speclines", :action => "edit", :id => @updated_specline.id}, :class => "get")%><%= escape_javascript(link_to image_tag("delete.png", :mouseover =>"delete-rollover.png", :border=>0), {:controller => "speclines", :action => "delete_specline", :id => @updated_specline.id}, :class => "delete")%></td></tr></table>";
                                                                      
var linetype_3 = "<td width='10px'></td><td class='prefix' width='18'><%= @updated_specline.txt1.text%>.</td><td><span class='new_editable_text4'><%= @updated_specline.txt4.text%></span>: <span class='new_editable_text5' style='color: #0000ff'><%= @updated_specline.txt5.text.to_s%>.</span></td>";
var linetype_4 = "<td width='10px'></td><td class='prefix' width='18'><%= @updated_specline.txt1.text%>.</td><td><span id='<%= @updated_specline.id.to_s%>' class='new_editable_text4'><%= @updated_specline.txt4.text.to_s%>.</span></td>";
var linetype_5 = "<td class='prefix' width='10px'>-</td><td><table><tr><td><span class='new_editable_text3'><%=@updated_specline.txt3.text.to_s%></span><td>:</td><td width = '5'></td><td><span class='new_editable_text6' style='color: #0000ff'><%=@updated_specline.txt6.text.to_s%>.</span></td></tr></table></td>";
var linetype_6 = "<td class='prefix' width='10px'>-</td><td><table><tr><td><span class='new_editable_text3'><%=@updated_specline.txt3.text.to_s%></span><td>:</td><td width = '5'></td><td><span class='new_editable_text5' style='color: #0000ff'><%=@updated_specline.txt5.text.to_s%>.</span></td></tr></table></td>";
var linetype_7 = "<td class='prefix' width='10px'>-</td><td><span class='new_editable_text4'><%= @updated_specline.txt4.text.to_s%>.</span></td>";
var linetype_8 = "<td class='prefix' width='10px'>-</td><td><span class='new_editable_text4'><%=@updated_specline.txt4.text.to_s%></span>: <span class='new_editable_text5' style='color: #0000ff'><%=@updated_specline.txt5.text.to_s%>.</span></td>";
var linetype_9 = "<td class='specline_guide' ><span class='new_editable_text4'><%= @updated_specline.txt4.text.to_s%>.</span></td>";


switch(<%=@updated_specline.linetype_id%>){
case 3: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_3 + line_suffix); break;
case 4: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_4 + line_suffix); break;
case 5: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_5 + line_suffix); break;
case 6: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_6 + line_suffix); break;
case 7: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_7 + line_suffix); break;
case 8: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_8 + line_suffix); break;
case 9: $('table#<%=@new_above_specline.id%>').after(line_prefix + linetype_9 + line_suffix); break;
}

$('table#<%=@updated_specline.id%> a.delete').deleteWithAjax();
$('table#<%=@updated_specline.id%> a.put').putWithAjax();
$('table#<%=@updated_specline.id%> a.get').getWithAjax();
$('table#<%=@updated_specline.id%> a.post').postWithAjax();


$('tr.new_specline_row').mouseenter(function (){
  $(this).children('td.specline_link').show();
      $(this).children('td.pad').children('img').show();
  $(this).children('td.padding').hide();
  $(this).css('background-color', '#efefef');
  });
  
$('table#<%=@updated_specline.id%> span.new_editable_text3').mouseover(function(){
$(this).editable('/speclines/<%=@updated_specline.id%>/update_specline_3', {id: <%=@updated_specline.id%>, type: 'text', onblur: 'submit', method: 'PUT', indicator: 'Saving..', submitdata: {_method: 'put', 'id': '<%=@updated_specline.id%>', authenticity_token: AUTH_TOKEN}});    
});
$('table#<%=@updated_specline.id%> span.new_editable_text4').mouseover(function(){
$(this).editable('/speclines/<%=@updated_specline.id%>/update_specline_4', {id: <%=@updated_specline.id%>, type: 'autogrow', onblur: 'submit', method: 'PUT', indicator: 'Saving..', autogrow : {lineHeight : 16, maxHeight  : 512}, submitdata: {_method: 'put', 'id': '<%=@updated_specline.id%>', authenticity_token: AUTH_TOKEN}});    
}); 
$('table#<%=@updated_specline.id%> span.new_editable_text5').mouseover(function(){
$(this).editable('/speclines/<%=@updated_specline.id%>/update_specline_5', {id: <%=@updated_specline.id%>, type: 'autogrow', onblur: 'submit', method: 'PUT', indicator: 'Saving..', autogrow : {lineHeight : 16, maxHeight  : 512}, submitdata: {_method: 'put', 'id': '<%=@updated_specline.id%>', authenticity_token: AUTH_TOKEN}});    
}); 
$('table#<%=@updated_specline.id%> span.new_editable_text6').mouseover(function(){
$(this).editable('/speclines/<%=@updated_specline.id%>/update_specline_6', {id: <%=@updated_specline.id%>, type: 'text', onblur: 'submit', method: 'PUT', indicator: 'Saving..', submitdata: {_method: 'put', 'id': '<%=@updated_specline.id%>', authenticity_token: AUTH_TOKEN}});    
});   
  
$('tr.new_specline_row').mouseleave(function (){
  $(this).children('td.specline_link').hide();
      $(this).children('td.pad').children('img').hide();
  $(this).children('td.padding').show();
  $(this).css('background-color', '#ffffff');
  });



<% if !@previous_prefixes.blank? %>
	<% @previous_prefixes.each do |prev_prefix|%>
		$('table#<%=prev_prefix[0]%> tr td.prefix').html('<%=prev_prefix[1]%>');
	<% end %>
<% end %>


<% if !@subsequent_prefixes.blank? %>
	<% @subsequent_prefixes.each do |sub_prefix|%>
		$('table#<%=sub_prefix[0]%> tr td.prefix').html('<%=sub_prefix[1]%>');
	<% end %>
<% end %>

